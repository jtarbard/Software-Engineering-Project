{% extends "includes/_main_layout.html"%}
{% block additional_css %}
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/activities.css') }}">

{% endblock %}

{% block title %}
The Vertex classes!
{% endblock %}

{% block main_content %}
    <form class="form-inline" method="post">
        <label for="start_date">Start date:</label>
        <input type="date" name="start_date" required value="{{search_field_data["start_date"]}}"
            max="{{search_field_data["max_date"]}}" min="{{search_field_data["min_date"]}}">
        <label for="start_time">From:</label>
        <input type="time" name="start_time" required step="3600"
               value="{{search_field_data["from_time"]}}" min="{{search_field_data["min_time"]}}">
        <label for="activity">Activity:</label>
        <select name="activity">
            <option value="Any" {% if search_field_data["activity"] == "Any" %} selected {% endif %} >Any</option>
            {% for actvitiy_type in activity_types %}
                {% if actvitiy_type.activity_type_id == search_field_data["activity"] or actvitiy_type.activity_type_id == sent_activity %}
                    <option value="{{actvitiy_type.activity_type_id}}" selected="selected">{{actvitiy_type.name.capitalize()}}</option>
                {% else %}
                    <option value="{{actvitiy_type.activity_type_id}}" >{{actvitiy_type.name.capitalize()}}</option>
                {% endif %}
            {% endfor %}
        </select>
        <label for="facility">Facility:</label>
        <select name="facility">
            <option value="Any"
            {% if search_field_data["facility"] == "Any" %} selected="selected" {% endif %} >Any</option>
            {% for facility in facilities %}
                {% if facility.facility_id == search_field_data["facility"] %}
                    <option value="{{facility.facility_id}}" selected>{{facility.name.capitalize()}}</option>
                {% else %}
                    <option value="{{facility.facility_id}}" >{{facility.name.capitalize()}}</option>
                {% endif %}
            {% endfor %}
        </select>
        <input type="submit" name="reload_search" value="Refresh results">
    </form>
    <form>
        {% if multiple == true %}
            <button class="btn btn-primary" type="submit" name="book">Book</button>
        {% endif %}
    <div class="table-responsive">
        <table class="table">
            <thead>
                <tr><td colspan="6"> Time Table </td></tr>
            </thead>
            <tbody>
                <tr>
                    <td>Class name</td>
                    <td>Class Start Time </td>
                    <td>Class End Time</td>
                    <td>Facility</td>
                    <td>Availability left</td>
                    <td>Book</td>
                </tr>
                {% for activity, availability in activity_dict.items() %}
                    <tr>
                        <td>{{ activity.activity_type.name }}</td>
                        <td>{{ activity.start_time }}</td>
                        <td>{{ activity.end_time }}</td>
                        <td><a href="/info/facilities#{{ activity.facility.facility_id }}">{{ activity.facility.name }}</a></td>
                        <td>{{ availability }}</td>
                        {% if multiple == true %}
                        <td><input type="checkbox" id="{{activity.activity_id}}" name="{{activity.activity_id}}" value="{{activity.activity_id}}"></td>
                        {% else %}
                        <td><a class="btn btn-danger" href="/activities/view_activity/{{ activity.activity_id }}">Book</a></td>
                        {% endif %}
                    </tr>
                {% endfor %}
            </tbody>
            </form>
        </table>
    </div>
{% endblock %}
