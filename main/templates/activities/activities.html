{% extends "includes/_main_layout.html"%}
{% block additional_css %}
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/activities.css') }}">

<!-- datetime picker -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css" />
{% endblock %}

{% block title %}
Booking Page
{% endblock %}

{% block main_content %}
<div class="container">
    <div class="row">
        <div class="col-sm-6">
            <div class="form-group" id="multidate" name="multidate">
                <input type="text" class="form-control">
            </div>
        </div>
    </div>
</div>

{#<div class="container">#}
{#    <!-- Accordion Wrapper -->#}
{#    <div class="accordion" id="bookingAccordion">#}
{##}
{#        {% for activity in activity_types %}#}
{#            <!-- Accordion Card -->#}
{#            <div class="card">#}
{#                <div class="card-header" id={{ "heading" + activity.name.title() }}>#}
{#                    <h2 class="mb-0">#}
{#                        <button type="button" class="btn btn-link" data-toggle="collapse" data-target={{ "#collapse" + activity.name.title() }}>#}
{#                            {{ activity.name.title() }}#}
{#                            <i class="fa fa-chevron-down pull-right"></i>#}
{#                        </button>#}
{#                    </h2>#}
{#                </div>#}
{#                <div id={{ "collapse" + activity.name.title() }} class="collapse" aria-labelledby={{ "heading" + activity.name.title() }} data-parent="#bookingAccordion">#}
{#                    <div class="card-body">#}
{#                        <p>{{ activity.description }}</p>#}
{##}
{#                        <!--datetime picker-->#}
{#                        <div class="row">#}
{#                            <div class='col-md-6'>#}
{#                                <div class="form-group">#}
{#                                    <h6>Chose a date to book for:</h6>#}
{#                                    <div class="input-group date" id={{ "datetimepicker" + activity.name.title() }} data-target-input="nearest">#}
{#                                        <input type="text" class="form-control datetimepicker-input" data-target={{ "#datetimepicker" + activity.name.title() }}/>#}
{#                                        <div class="input-group-append" data-target={{ "#datetimepicker" + activity.name.title() }} data-toggle="datetimepicker">#}
{#                                            <div class="input-group-text"><i class="fa fa-calendar"></i></div>#}
{#                                        </div>#}
{#                                    </div>#}
{#                                </div>#}
{#                            </div>#}
{#                        </div>#}
{##}
{#                        <script type="text/javascript">#}
{#                            $(function () {#}
{#                                $( {{ "datetimepicker" + activity.name.title() }} ).datetimepicker({#}
{#                                    format: "L"#}
{#                                });#}
{#                            });#}
{#                        </script>#}
{#                        <!--datetime picker-->#}
{#                    </div>#}
{#                </div>#}
{#            </div>#}
{#            <!-- Accordion Card -->#}
{#        {% endfor %}#}
{##}
{#    </div>#}
{#    <!-- Accordion Wrapper -->#}
</div>

    <!-- original stuff -->
{#        <form class="form-inline" method="post">#}
{#        <label for="start_date">Start date:</label>#}
{#        <input type="date" name="start_date" required value="{{search_field_data["start_date"]}}"#}
{#            max="{{search_field_data["max_date"]}}" min="{{search_field_data["min_date"]}}">#}
{#        <label for="start_time">From:</label>#}
{#        <input type="time" name="start_time" required step="3600"#}
{#               value="{{search_field_data["from_time"]}}" min="{{search_field_data["min_time"]}}">#}
{#        <label for="activity">Activity:</label>#}
{#        <select name="activity">#}
{#            <option value="Any" {% if search_field_data["activity"] == "Any" %} selected {% endif %} >Any</option>#}
{#            {% for actvitiy_type in activity_types %}#}
{#                {% if actvitiy_type.activity_type_id == search_field_data["activity"] or actvitiy_type.activity_type_id == sent_activity %}#}
{#                    <option value="{{actvitiy_type.activity_type_id}}" selected="selected">{{actvitiy_type.name.capitalize()}}</option>#}
{#                {% else %}#}
{#                    <option value="{{actvitiy_type.activity_type_id}}" >{{actvitiy_type.name.capitalize()}}</option>#}
{#                {% endif %}#}
{#            {% endfor %}#}
{#        </select>#}
{#        <label for="facility">Facility:</label>#}
{#        <select name="facility">#}
{#            <option value="Any"#}
{#            {% if search_field_data["facility"] == "Any" %} selected="selected" {% endif %} >Any</option>#}
{#            {% for facility in facilities %}#}
{#                {% if facility.facility_id == search_field_data["facility"] %}#}
{#                    <option value="{{facility.facility_id}}" selected>{{facility.name.capitalize()}}</option>#}
{#                {% else %}#}
{#                    <option value="{{facility.facility_id}}" >{{facility.name.capitalize()}}</option>#}
{#                {% endif %}#}
{#            {% endfor %}#}
{#        </select>#}
{#        <input type="submit" name="reload_search" value="Refresh results">#}
{#    </form>#}
{#    <form method="post">#}
{#        {% if multiple == 'True' %}#}
{#            <button class="btn btn-primary" type="submit" name="book">Book</button>#}
{#        {% endif %}#}
{#    <div class="table-responsive">#}
{#        <table class="table">#}
{#            <thead>#}
{#                <tr><td colspan="6"> Time Table </td></tr>#}
{#            </thead>#}
{#            <tbody>#}
{#                <tr>#}
{#                    <td>Class name</td>#}
{#                    <td>Class Start Time </td>#}
{#                    <td>Class End Time</td>#}
{#                    <td>Facility</td>#}
{#                    <td>Availability left</td>#}
{#                    <td>Book</td>#}
{#                </tr>#}
{#                {% for activity, availability in activity_dict.items() %}#}
{#                    <tr>#}
{#                        <td>{{ activity.activity_type.name.title() }}</td>#}
{#                        <td>{{ activity.start_time }}</td>#}
{#                        <td>{{ activity.end_time }}</td>#}
{#                        <td><a href="/info/facilities#{{ activity.facility.facility_id }}">{{ activity.facility.name.title()}}</a></td>#}
{#                        <td>{{ availability }}</td>#}
{#                        {% if multiple == 'True' %}#}
{#                                <td>#}
{#                                    <input type="checkbox" id="{{activity.activity_id}}" name="bulk_activity" value="{{activity.activity_id}}">#}
{#                                </td>#}
{#                        {% else %}#}
{#                            <td><a class="btn btn-danger" href="/activities/view_activity/{{ activity.activity_id }}">Book</a></td>#}
{#                        {% endif %}#}
{#                    </tr>#}
{#                {% endfor %}#}
{#            </tbody>#}
{#        </table>#}
{#    </form>#}
{% endblock %}

{% block additional_js %}
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>

<script>
    $(document).ready(function(){
        // Add chevron-up icon for collapse element which is open by default
        $(".collapse.show").each(function(){
        	$(this).prev(".card-header").find(".fa").addClass("fa-chevron-up pull-right").removeClass("fa-chevron-up pull-right");
        });

        // Toggle chevron icon on show hide of collapse element
        $(".collapse").on('show.bs.collapse', function(){
        	$(this).prev(".card-header").find(".fa").removeClass("fa-chevron-down pull-right").addClass("fa-chevron-up pull-right");
        }).on('hide.bs.collapse', function(){
        	$(this).prev(".card-header").find(".fa").removeClass("fa-chevron-up pull-right").addClass("fa-chevron-down pull-right");
        });
    });

    $('#multidate input').datepicker({
        multidate: true
    });
</script>
{% endblock %}